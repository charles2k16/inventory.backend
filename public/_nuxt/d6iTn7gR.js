import{_ as T}from"./jNmtiVgl.js";import{G as R,o as n,c as i,a as t,t as a,n as A,m as W,v as U,x as g,F as M,r as E,d as D,g as p,j as V,A as S,k as I,b as G,w as L,l}from"./D8_npMnH.js";const Q={key:0,class:"fixed inset-0 bg-black dark:bg-gray-900 bg-opacity-50 dark:bg-opacity-75 flex items-center justify-center z-50 p-4"},B={class:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-screen overflow-y-auto"},z={class:"sticky top-0 bg-white dark:bg-gray-800 px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"},q={class:"text-lg font-medium text-gray-900 dark:text-white"},J={key:0,class:"p-6 space-y-6"},K={class:"grid grid-cols-3 gap-4"},X={class:"text-gray-900 dark:text-white font-semibold"},Y={class:"text-gray-900 dark:text-white font-semibold"},Z={class:"border dark:border-gray-700 rounded-lg overflow-hidden"},tt={class:"px-4 py-3 bg-gray-50 dark:bg-gray-700 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2"},et={class:"relative w-full sm:w-64"},rt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800"},at={class:"bg-gray-50 dark:bg-gray-700"},st={key:0,class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},ot={class:"divide-y divide-gray-200 dark:divide-gray-700"},lt={class:"px-4 py-3 text-sm font-medium text-gray-900 dark:text-white"},dt={class:"px-4 py-3 text-sm text-gray-900 dark:text-white"},nt={key:0,class:"px-4 py-3 text-sm text-gray-900 dark:text-white"},it={class:"px-4 py-3 text-sm font-semibold text-gray-900 dark:text-white"},ct={key:0},ut={class:"px-4 py-3 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},gt={class:"text-xs text-gray-500 dark:text-gray-400"},xt={class:"font-medium"},yt={class:"font-medium"},pt={class:"font-medium"},mt={class:"flex items-center justify-end gap-2"},bt=["disabled"],kt={class:"text-xs text-gray-500 dark:text-gray-400"},vt=["disabled"],ft={key:0},ht={class:"border rounded-lg overflow-hidden"},wt={class:"min-w-full divide-y divide-gray-200"},_t={class:"divide-y divide-gray-200"},St={class:"px-4 py-3 text-sm text-gray-900 dark:text-white"},$t={class:"px-4 py-3 text-sm text-gray-600 dark:text-white"},Vt={class:"px-4 py-3 text-sm text-gray-900 dark:text-white"},Ct={class:"px-4 py-3 text-sm font-semibold text-gray-900 dark:text-white"},jt={class:"px-4 py-3 text-sm text-gray-600 dark:text-white"},Dt={class:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200"},Nt={class:"text-md text-gray-700"},Ot={class:"text-blue-600 font-bold"},Pt={class:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200"},Ft={class:"space-y-3"},Gt={class:"flex justify-between items-center"},Ht={class:"font-semibold text-gray-900"},Rt={key:0,class:"flex justify-between items-center"},Mt={class:"font-semibold text-gray-900"},Et={key:1,class:"border-t border-blue-300 pt-3 flex justify-between items-center bg-red-50 p-2 rounded"},At={class:"font-bold text-red-600"},Tt={key:2,class:"mt-4 pt-4 border-t border-blue-300 flex justify-between items-center"},Wt={class:"font-semibold text-green-600"},Ut={key:3,class:"border-t border-blue-300 pt-3 flex justify-between items-center bg-purple-50 p-2 rounded"},It={class:"font-bold text-purple-600"},Lt={key:4,class:"text-sm text-amber-700 bg-amber-50 p-2 rounded"},Qt={key:1},Bt={class:"text-gray-900 mt-1"},zt={key:2,class:"bg-gray-50 p-4 rounded-lg"},qt={__name:"ReportDetailsModal",props:{report:{type:Object,default:null}},emits:["close"],setup(m){const y=m,r=p(null),x=p(!1),f=p(""),u=p(1),v=p(10),w=S(()=>!r.value||!r.value.openingStock?[]:Object.entries(r.value.openingStock).map(([o,e])=>{const c=r.value.productsMap?.[o]||{},P=r.value.closingStock?.[o]||0;return{productId:o,itemName:c.itemName||"Unknown Product",openingQty:e,closingQty:P,costPrice:c.costPrice||0}})),b=S(()=>{const o=f.value.trim().toLowerCase();return o?w.value.filter(e=>e.itemName.toLowerCase().includes(o)):w.value}),_=S(()=>b.value.length?Math.ceil(b.value.length/v.value):1),h=S(()=>{const o=(u.value-1)*v.value;return b.value.slice(o,o+v.value)}),N=S(()=>b.value.length?(u.value-1)*v.value+1:0),$=S(()=>b.value.length?Math.min(b.value.length,u.value*v.value):0),C=()=>{u.value>1&&(u.value-=1)},O=()=>{u.value<_.value&&(u.value+=1)},j=o=>{const e=new Date(o);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(e)},k=o=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o||0),d=o=>{if(!o.closingStock||!o.productsMap)return 0;let e=0;return Object.entries(o.closingStock).forEach(([c,P])=>{const F=o.productsMap[c];F&&F.costPrice&&(e+=parseFloat(P||0)*parseFloat(F.costPrice))}),e},s=async()=>{if(y.report?.id)try{x.value=!0;const{$api:o}=V(),e=await o.get(`/stock-reports/${y.report.id}`);r.value=e}catch(o){console.error("Error fetching report details:",o),r.value=y.report}finally{x.value=!1}};return R([()=>r.value,f],()=>{u.value=1}),R(()=>y.report,()=>{y.report&&s()}),(o,e)=>m.report?(n(),i("div",Q,[t("div",B,[t("div",z,[t("h3",q," Week "+a(r.value?.weekNumber)+" Report - "+a(r.value?.year),1),t("button",{onClick:e[0]||(e[0]=c=>o.$emit("close")),class:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}," âœ• ")]),r.value?(n(),i("div",J,[t("div",K,[t("div",null,[e[2]||(e[2]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Period",-1)),t("p",X,a(j(r.value.startDate))+" - "+a(j(r.value.endDate)),1)]),t("div",null,[e[3]||(e[3]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Stock Value",-1)),t("p",Y," GHS "+a(k(r.value.totalValue)),1)]),t("div",null,[e[4]||(e[4]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Status",-1)),t("p",{class:A(["font-semibold",Object.keys(r.value.closingStock).length>0?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"])},a(Object.keys(r.value.closingStock).length>0?"Closed":"Open"),3)])]),t("div",Z,[t("div",tt,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Stock Breakdown ",-1)),t("div",et,[W(t("input",{"onUpdate:modelValue":e[1]||(e[1]=c=>f.value=c),type:"text",placeholder:"Search products...",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 py-2 pl-3 pr-8 text-sm text-gray-900 dark:text-white placeholder-gray-400 focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[U,f.value]]),e[5]||(e[5]=t("span",{class:"pointer-events-none absolute inset-y-0 right-2 flex items-center text-gray-400"}," ðŸ” ",-1))])]),t("table",rt,[t("thead",at,[t("tr",null,[e[7]||(e[7]=t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"}," Product ",-1)),e[8]||(e[8]=t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"}," Opening ",-1)),Object.keys(r.value.closingStock).length>0?(n(),i("th",st," Closing ")):g("",!0),e[9]||(e[9]=t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"}," Cost Price ",-1))])]),t("tbody",ot,[(n(!0),i(M,null,E(h.value,c=>(n(),i("tr",{key:c.productId,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",lt,a(c.itemName),1),t("td",dt,a(c.openingQty),1),Object.keys(r.value.closingStock).length>0?(n(),i("td",nt,a(c.closingQty),1)):g("",!0),t("td",it," GHS "+a(k(c.costPrice)),1)]))),128)),h.value.length?g("",!0):(n(),i("tr",ct,[...e[10]||(e[10]=[t("td",{colspan:"4",class:"px-4 py-6 text-center text-sm text-gray-500 dark:text-gray-400"}," No products found. ",-1)])]))])]),t("div",ut,[t("p",gt,[e[11]||(e[11]=D(" Showing ",-1)),t("span",xt,a(N.value),1),e[12]||(e[12]=D(" to ",-1)),t("span",yt,a($.value),1),e[13]||(e[13]=D(" of ",-1)),t("span",pt,a(b.value.length),1),e[14]||(e[14]=D(" products ",-1))]),t("div",mt,[t("button",{type:"button",class:"inline-flex items-center rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:cursor-not-allowed disabled:opacity-50",disabled:u.value===1,onClick:C}," Previous ",8,bt),t("span",kt," Page "+a(u.value)+" of "+a(_.value),1),t("button",{type:"button",class:"inline-flex items-center rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:cursor-not-allowed disabled:opacity-50",disabled:u.value===_.value||_.value===0,onClick:O}," Next ",8,vt)])])]),r.value.additionalStock&&r.value.additionalStock.length>0?(n(),i("div",ft,[e[17]||(e[17]=t("h4",{class:"text-md font-medium text-gray-900 mb-3 dark:text-white"},"Additional Stock Added",-1)),t("div",ht,[t("table",wt,[e[15]||(e[15]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase dark:text-gray-400"}," Product "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase dark:text-gray-400"}," Category "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase dark:text-gray-400"}," Quantity "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase dark:text-gray-400"}," Total Cost "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase dark:text-gray-400"}," Date ")])],-1)),t("tbody",_t,[(n(!0),i(M,null,E(r.value.additionalStock,c=>(n(),i("tr",{key:c.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",St,a(c.product?.itemName||"Unknown"),1),t("td",$t,a(c.product?.category||"-"),1),t("td",Vt,a(c.quantity),1),t("td",Ct," GHS "+a(k(c.totalCost)),1),t("td",jt,a(j(c.purchaseDate)),1)]))),128))])])]),t("div",Dt,[t("p",Nt,[e[16]||(e[16]=t("span",{class:"font-medium"},"Total Additional Stock Value:",-1)),t("span",Ot," GHS "+a(k(r.value.additionalStockValue)),1)])])])):g("",!0),t("div",Pt,[e[24]||(e[24]=t("h4",{class:"text-sm font-medium text-gray-900 mb-4"}," Inventory Movement Summary ",-1)),t("div",Ft,[t("div",Gt,[e[18]||(e[18]=t("span",{class:"text-gray-700"},"Opening Stock Value:",-1)),t("span",Ht," GHS "+a(k(r.value.totalValue)),1)]),Object.keys(r.value.closingStock).length>0?(n(),i("div",Rt,[e[19]||(e[19]=t("span",{class:"text-gray-700"},"- Closing Stock Value:",-1)),t("span",Mt," GHS "+a(k(d(r.value))),1)])):g("",!0),Object.keys(r.value.closingStock).length>0?(n(),i("div",Et,[e[20]||(e[20]=t("span",{class:"font-medium text-red-900"},"= Goods Sold (Cost Value):",-1)),t("span",At," GHS "+a(k(parseFloat(r.value.totalValue)-d(r.value))),1)])):g("",!0),r.value.additionalStock&&r.value.additionalStock.length>0?(n(),i("div",Tt,[e[21]||(e[21]=t("span",{class:"text-gray-700"},"+ Goods Purchased (New Stock):",-1)),t("span",Wt," GHS "+a(k(r.value.additionalStockValue)),1)])):g("",!0),Object.keys(r.value.closingStock).length>0&&r.value.additionalStock&&r.value.additionalStock.length>0?(n(),i("div",Ut,[e[22]||(e[22]=t("span",{class:"font-medium text-purple-900"},"= New Opening Stock (Next Period):",-1)),t("span",It," GHS "+a(k(parseFloat(d(r.value))+parseFloat(r.value.additionalStockValue||0))),1)])):g("",!0),Object.keys(r.value.closingStock).length===0?(n(),i("div",Lt,[...e[23]||(e[23]=[t("p",null,"ðŸ“‹ Close the report to see goods sold calculation",-1)])])):g("",!0)])]),r.value.notes?(n(),i("div",Qt,[e[25]||(e[25]=t("label",{class:"text-sm font-medium text-gray-700"},"Notes",-1)),t("p",Bt,a(r.value.notes),1)])):g("",!0),Object.keys(r.value.closingStock).length>0?(n(),i("div",zt,[...e[26]||(e[26]=[t("p",{class:"text-sm text-gray-600 mb-2"},' This report has been closed. Click the "Variance" button in the reports list to see the detailed variance analysis. ',-1)])])):g("",!0)])):g("",!0)])])):g("",!0)}},Jt={key:0,class:"fixed inset-0 bg-black dark:bg-gray-900 bg-opacity-50 dark:bg-opacity-75 flex items-center justify-center z-50 p-4"},Kt={class:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-screen overflow-y-auto"},Xt={class:"sticky top-0 bg-white dark:bg-gray-800 px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"},Yt={class:"text-lg font-medium text-gray-900 dark:text-white"},Zt={class:"p-6 space-y-6"},te={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ee={class:"p-4 bg-blue-50 dark:bg-blue-900 rounded-lg border border-blue-200 dark:border-blue-700"},re={class:"text-2xl font-bold text-blue-600 dark:text-blue-300 mt-1"},ae={class:"p-4 bg-green-50 dark:bg-green-900 rounded-lg border border-green-200 dark:border-green-700"},se={class:"text-2xl font-bold text-green-600 dark:text-green-300 mt-1"},oe={class:"p-4 bg-red-50 dark:bg-red-900 rounded-lg border border-red-200 dark:border-red-700"},le={class:"text-2xl font-bold text-red-600 dark:text-red-300 mt-1"},de={class:"p-4 bg-purple-50 dark:bg-purple-900 rounded-lg border border-purple-200 dark:border-purple-700"},ne={class:"text-2xl font-bold text-purple-600 dark:text-purple-300 mt-1"},ie={__name:"VarianceModal",props:{variance:{type:Object,default:null}},emits:["close"],setup(m){const y=r=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0);return(r,x)=>m.variance?(n(),i("div",Jt,[t("div",Kt,[t("div",Xt,[t("h3",Yt," Stock Variance - Week "+a(m.variance.weekNumber)+"/"+a(m.variance.year),1),t("button",{onClick:x[0]||(x[0]=f=>r.$emit("close")),class:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}," âœ• ")]),t("div",Zt,[t("div",te,[t("div",ee,[x[1]||(x[1]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-blue-200"},"Opening Stock Value",-1)),t("p",re," GHS "+a(y(m.variance.openingStockValue)),1)]),t("div",ae,[x[2]||(x[2]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-green-200"},"Closing Stock Value",-1)),t("p",se," GHS "+a(y(m.variance.closingStockValue)),1)]),t("div",oe,[x[3]||(x[3]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-red-200"},"Goods Sold (Cost Value)",-1)),t("p",le," GHS "+a(y(m.variance.goodsSoldValue)),1)]),t("div",de,[x[4]||(x[4]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-purple-200"},"Additional Stock Value",-1)),t("p",ne," GHS "+a(y(m.variance.additionalStockValue)),1)])])])])])):g("",!0)}},ce={class:"bg-white dark:bg-gray-800 shadow"},ue={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 flex justify-between items-center"},ge={class:"flex gap-3"},xe={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},ye={key:0,class:"bg-blue-50 dark:bg-blue-900 border-l-4 border-blue-400 dark:border-blue-600 p-6 mb-6 rounded-r-lg"},pe={class:"flex justify-between items-start"},me={class:"text-lg font-semibold text-blue-900 dark:text-blue-100 mt-1"},be={class:"text-sm text-blue-700 dark:text-blue-200 mt-2"},ke={key:0,class:"text-sm text-blue-700 dark:text-blue-200"},ve={class:"text-sm font-medium text-blue-900 dark:text-blue-100 mt-2"},fe={key:1,class:"text-sm font-medium text-green-700 dark:text-green-200 mt-2"},he=["disabled"],we={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},_e={class:"overflow-x-auto"},Se={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},$e={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Ve={key:0},Ce={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},je={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},De={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900 dark:text-white"},Ne={class:"px-6 py-4 whitespace-nowrap"},Oe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2"},Pe=["onClick"],Fe=["onClick"],Ge={key:0,class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between"},He={class:"text-sm text-gray-600 dark:text-gray-400"},Re={class:"flex gap-2"},Me=["disabled"],Ee=["disabled"],H=20,We={__name:"stock-reports",setup(m){const y=p([]),r=p(null),x=p(null),f=p(null),u=p(1),v=p({total:0,pages:1}),w=p(!1),b=S(()=>v.value.pages),_=d=>{const s=new Date(d);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(s)},h=d=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(d||0),N=d=>{if(!d.closingStock||!d.productsMap)return 0;let s=0;return Object.entries(d.closingStock).forEach(([o,e])=>{const c=d.productsMap[o];c&&c.costPrice&&(s+=parseFloat(e||0)*parseFloat(c.costPrice))}),s},$=async()=>{try{const{$api:d}=V(),s=await d.get("/stock-reports",{page:u.value,limit:H});y.value=s.reports||[],v.value=s.pagination||{}}catch(d){console.error("Error fetching reports:",d)}},C=async()=>{try{const{$api:d}=V(),s=await d.get("/stock-reports/current");r.value=s}catch(d){console.error("Error fetching current report:",d)}},O=async()=>{try{const{$api:d}=V(),s=new Date;s.setDate(s.getDate()-s.getDay()),s.setHours(0,0,0,0);const o=new Date(s);o.setDate(s.getDate()+6),o.setHours(23,59,59,999),await d.post("/stock-reports",{startDate:s.toISOString(),endDate:o.toISOString()}),await C(),await $()}catch(d){console.error("Error creating report:",d)}},j=async()=>{try{w.value=!0;const{$api:d}=V();await d.patch(`/stock-reports/${r.value.id}/close`,{}),await C(),await $()}catch(d){console.error("Error closing report:",d)}finally{w.value=!1}},k=async d=>{try{const{$api:s}=V(),o=await s.get(`/stock-reports/${d.id}/variance`);f.value=o}catch(s){console.error("Error fetching variance:",s)}};return R(u,()=>{$()}),I(()=>{$(),C()}),(d,s)=>{const o=T;return n(),i("div",null,[t("header",ce,[t("div",ue,[s[6]||(s[6]=t("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"}," Weekly Stock Reports ",-1)),t("div",ge,[G(o,{to:"/stock-records",class:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},{default:L(()=>[...s[5]||(s[5]=[D(" + Add Stock ",-1)])]),_:1}),t("button",{onClick:O,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700"}," + Create Report ")])])]),t("main",xe,[l(r)?(n(),i("div",ye,[t("div",pe,[t("div",null,[s[7]||(s[7]=t("p",{class:"text-sm font-medium text-blue-800 dark:text-blue-200"}," Current Week Report ",-1)),t("p",me," Week "+a(l(r).weekNumber)+" - "+a(l(r).year),1),t("p",be," Opening Stock Value: GHS "+a(h(l(r).totalValue)),1),l(r).additionalStock&&l(r).additionalStock.length>0?(n(),i("p",ke," Additional Stock Value: GHS "+a(h(l(r).additionalStockValue)),1)):g("",!0),t("p",ve," Expected Total Value: GHS "+a(h(parseFloat(l(r).totalValue)+parseFloat(l(r).additionalStockValue||0))),1),l(r).closingStock&&Object.keys(l(r).closingStock).length>0?(n(),i("p",fe," Goods Sold: GHS "+a(h(parseFloat(l(r).totalValue)+parseFloat(l(r).additionalStockValue||0)-N(l(r)))),1)):g("",!0)]),!l(r).closingStock||Object.keys(l(r).closingStock).length===0?(n(),i("button",{key:0,onClick:j,disabled:l(w),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"},a(l(w)?"Closing...":"Close Report"),9,he)):(n(),i("button",{key:1,onClick:s[0]||(s[0]=e=>x.value=l(r)),class:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700"}," View Details "))])])):g("",!0),t("div",we,[s[10]||(s[10]=t("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[t("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"All Reports")],-1)),t("div",_e,[t("table",Se,[s[9]||(s[9]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Week "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Period "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Opening Stock "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",$e,[l(y).length===0?(n(),i("tr",Ve,[...s[8]||(s[8]=[t("td",{colspan:"5",class:"px-6 py-4 text-center text-gray-500 dark:text-gray-400"}," No reports found ",-1)])])):g("",!0),(n(!0),i(M,null,E(l(y),e=>(n(),i("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",Ce," W"+a(e.weekNumber)+"/"+a(e.year),1),t("td",je,a(_(e.startDate))+" - "+a(_(e.endDate)),1),t("td",De," GHS "+a(h(e.totalValue)),1),t("td",Ne,[t("span",{class:A(["px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",Object.keys(e.closingStock).length>0?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"])},a(Object.keys(e.closingStock).length>0?"Closed":"Open"),3)]),t("td",Oe,[t("button",{onClick:c=>x.value=e,class:"text-primary-600 dark:text-primary-400 hover:text-primary-900 dark:hover:text-primary-300"}," View ",8,Pe),Object.keys(e.closingStock).length>0?(n(),i("button",{key:0,onClick:c=>k(e),class:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300"}," Variance ",8,Fe)):g("",!0)])]))),128))])])]),l(b)>1?(n(),i("div",Ge,[t("div",He," Showing "+a((l(u)-1)*H+1)+" to "+a(Math.min(l(u)*H,l(v).total))+" of "+a(l(v).total)+" reports ",1),t("div",Re,[t("button",{onClick:s[1]||(s[1]=e=>u.value=Math.max(1,l(u)-1)),disabled:l(u)===1,class:"px-3 py-1 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 rounded-md text-sm hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50"}," Previous ",8,Me),t("button",{onClick:s[2]||(s[2]=e=>u.value=Math.min(l(b),l(u)+1)),disabled:l(u)===l(b),class:"px-3 py-1 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 rounded-md text-sm hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50"}," Next ",8,Ee)])])):g("",!0)]),G(qt,{report:l(x),onClose:s[3]||(s[3]=e=>x.value=null)},null,8,["report"]),G(ie,{variance:l(f),onClose:s[4]||(s[4]=e=>f.value=null)},null,8,["variance"])])])}}};export{We as default};
