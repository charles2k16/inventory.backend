import{g as f,A as t}from"./D8_npMnH.js";const e={ADMIN:"ADMIN",MANAGER:"MANAGER",SALES:"SALES"};function s(){if(typeof window>"u")return null;try{const n=localStorage.getItem("user");if(!n)return null;const r=JSON.parse(n);if(!r?.id||!r?.username)return null;const o=r.role==="STAFF"||r.role===e.SALES?e.SALES:r.role===e.MANAGER?e.MANAGER:r.role===e.ADMIN?e.ADMIN:e.SALES;return{id:r.id,username:r.username,email:r.email,firstName:r.firstName,lastName:r.lastName,role:o}}catch{return null}}function a(n,r){return n?.role!=null&&r.includes(n.role)}function R(){const n=f(s()),r=t(()=>n.value?.role===e.ADMIN),o=t(()=>n.value?.role===e.MANAGER),u=t(()=>n.value?.role===e.SALES),l=t(()=>a(n.value,[e.ADMIN,e.MANAGER])),A=t(()=>a(n.value,[e.ADMIN,e.MANAGER])),c=t(()=>a(n.value,[e.ADMIN,e.MANAGER])),i=t(()=>a(n.value,[e.ADMIN,e.MANAGER])),M=t(()=>a(n.value,[e.ADMIN]));function N(E){n.value=E}function S(){n.value=s()}return{user:n,isAdmin:r,isManager:o,isSales:u,canManageProducts:l,canManageStock:A,canManageReports:c,canManageReturns:i,canViewActivity:M,setUser:N,refreshUser:S,ROLES:e}}export{R as u};
