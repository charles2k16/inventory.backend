import{j as N,k as A,c as l,a as e,l as a,F as S,r as U,q as C,m as n,v as u,y as M,t as d,x as c,g,o,n as w}from"./D8_npMnH.js";const _={class:"bg-white dark:bg-gray-800 shadow"},E={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 flex justify-between items-center"},V={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},q={class:"bg-white dark:bg-gray-800 shadow sm:rounded-lg"},D={class:"px-4 py-5 sm:p-6"},L={key:0,class:"flex justify-center py-8"},j={key:1,class:"text-center py-12 text-gray-500 dark:text-gray-400"},B={key:2,class:"overflow-x-auto"},F={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},R={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},$={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},G={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},I={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},z={class:"px-6 py-4 whitespace-nowrap"},P={class:"px-6 py-4 whitespace-nowrap"},T={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},H={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},J={class:"flex min-h-screen items-center justify-center p-4"},K={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6"},O={class:"grid grid-cols-2 gap-4"},Q={key:0,class:"rounded-md bg-red-50 dark:bg-red-900/20 p-3 text-sm text-red-700 dark:text-red-300"},W={class:"flex justify-end gap-3 pt-2"},X=["disabled"],ee={__name:"users",setup(Y){const{$api:f}=N(),x=g([]),b=g(!0),m=g(!1),y=g(!1),p=g(""),s=g({username:"",email:"",password:"",firstName:"",lastName:"",role:"SALES"});function v(i){return i?new Date(i).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):""}async function k(){b.value=!0;try{x.value=await f.get("/users")}catch{x.value=[]}finally{b.value=!1}}async function h(){p.value="",y.value=!0;try{await f.post("/auth/register",{username:s.value.username,email:s.value.email,password:s.value.password,firstName:s.value.firstName,lastName:s.value.lastName,role:s.value.role}),m.value=!1,s.value={username:"",email:"",password:"",firstName:"",lastName:"",role:"SALES"},await k()}catch(i){p.value=i?.message||"Failed to create user"}finally{y.value=!1}}return A(()=>{k()}),(i,t)=>(o(),l("div",null,[e("header",_,[e("div",E,[t[9]||(t[9]=e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"}," User management ",-1)),e("button",{onClick:t[0]||(t[0]=r=>m.value=!0),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700"}," + Add user ")])]),e("main",V,[e("div",q,[e("div",D,[t[12]||(t[12]=e("h2",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4"}," Staff & roles ",-1)),a(b)?(o(),l("div",L,[...t[10]||(t[10]=[e("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary-600"},null,-1)])])):a(x).length===0?(o(),l("div",j," No users yet. Add one below. ")):(o(),l("div",B,[e("table",F,[t[11]||(t[11]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Name "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Username "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Email "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Role "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Created ")])],-1)),e("tbody",R,[(o(!0),l(S,null,U(a(x),r=>(o(),l("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",$,d(r.firstName)+" "+d(r.lastName),1),e("td",G,d(r.username),1),e("td",I,d(r.email),1),e("td",z,[e("span",{class:w(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",r.role==="ADMIN"?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":r.role==="MANAGER"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"])},d(r.role),3)]),e("td",P,[e("span",{class:w(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",r.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"])},d(r.isActive?"Active":"Inactive"),3)]),e("td",T,d(v(r.createdAt)),1)]))),128))])])]))])])]),a(m)?(o(),l("div",H,[e("div",J,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 dark:bg-gray-900 dark:bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t[1]||(t[1]=r=>m.value=!1)}),e("div",K,[t[21]||(t[21]=e("h3",{id:"modal-title",class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," Add user ",-1)),e("form",{onSubmit:C(h,["prevent"]),class:"space-y-4"},[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Username *",-1)),n(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>a(s).username=r),type:"text",required:"",class:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-white shadow-sm focus:ring-primary-500 focus:border-primary-500"},null,512),[[u,a(s).username]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Email *",-1)),n(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>a(s).email=r),type:"email",required:"",class:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-white shadow-sm focus:ring-primary-500 focus:border-primary-500"},null,512),[[u,a(s).email]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Password *",-1)),n(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>a(s).password=r),type:"password",required:"",minlength:"6",class:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-white shadow-sm focus:ring-primary-500 focus:border-primary-500"},null,512),[[u,a(s).password]]),t[16]||(t[16]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"At least 6 characters",-1))]),e("div",O,[e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"First name *",-1)),n(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>a(s).firstName=r),type:"text",required:"",class:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-white shadow-sm focus:ring-primary-500 focus:border-primary-500"},null,512),[[u,a(s).firstName]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Last name *",-1)),n(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>a(s).lastName=r),type:"text",required:"",class:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-white shadow-sm focus:ring-primary-500 focus:border-primary-500"},null,512),[[u,a(s).lastName]])])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Role *",-1)),n(e("select",{"onUpdate:modelValue":t[7]||(t[7]=r=>a(s).role=r),required:"",class:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-white shadow-sm focus:ring-primary-500 focus:border-primary-500"},[...t[19]||(t[19]=[e("option",{value:"SALES"},"Sales",-1),e("option",{value:"MANAGER"},"Manager",-1),e("option",{value:"ADMIN"},"Admin",-1)])],512),[[M,a(s).role]])]),a(p)?(o(),l("div",Q,d(a(p)),1)):c("",!0),e("div",W,[e("button",{type:"button",onClick:t[8]||(t[8]=r=>m.value=!1),class:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"}," Cancel "),e("button",{type:"submit",disabled:a(y),class:"px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50"},d(a(y)?"Creating...":"Create user"),9,X)])],32)])])])):c("",!0)]))}};export{ee as default};
