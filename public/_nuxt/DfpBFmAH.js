import{G as f,o as s,c as l,a as t,t as n,x as i,n as u,l as a,m as g,v as c,y as v,E as w,d as S,g as C}from"./D8_npMnH.js";const q={key:0,class:"fixed inset-0 bg-black dark:bg-gray-900 bg-opacity-50 dark:bg-opacity-75 flex items-center justify-center z-50 p-4"},A={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-screen flex flex-col"},U={class:"p-6 border-b border-gray-200 dark:border-gray-700"},N={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},h={class:"p-6 space-y-4 overflow-y-auto flex-1"},E={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},V={class:"text-2xl font-bold text-gray-900 dark:text-white"},B={class:"flex gap-3"},D={class:"bg-blue-50 dark:bg-blue-900 p-4 rounded-lg"},L={key:0,class:"p-3 bg-red-100 border border-red-400 text-red-700 rounded"},M={class:"p-6 border-t border-gray-200 flex gap-3"},R=["disabled"],O={key:0,class:"animate-spin"},j={__name:"StockUpdateModal",props:{isOpen:{type:Boolean,default:!1},product:{type:Object,default:null},isLoading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["close","submit"],setup(o,{emit:m}){const x=o,y=m,r=C({action:"add",quantity:null,reason:"",notes:""}),p=()=>{r.value={action:"add",quantity:null,reason:"",notes:""},y("close")},k=()=>{y("submit",{...r.value,quantity:r.value.quantity})};return f(()=>x.isOpen,b=>{b||(r.value={action:"add",quantity:null,reason:"",notes:""})}),(b,e)=>o.isOpen?(s(),l("div",q,[t("div",A,[t("div",U,[e[5]||(e[5]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Update Stock",-1)),o.product?.itemName?(s(),l("p",N,n(o.product.itemName),1)):i("",!0)]),t("div",h,[t("div",E,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-600 dark:text-gray-300"},"Current Stock",-1)),t("p",V,n(o.product?.currentStock),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Action",-1)),t("div",B,[t("button",{onClick:e[0]||(e[0]=d=>a(r).action="add"),class:u(["flex-1 px-4 py-2 rounded-md font-medium text-sm transition",a(r).action==="add"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 border-2 border-green-300 dark:border-green-600":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-2 border-gray-200 dark:border-gray-600"])}," ➕ Add Stock ",2),t("button",{onClick:e[1]||(e[1]=d=>a(r).action="reduce"),class:u(["flex-1 px-4 py-2 rounded-md font-medium text-sm transition",a(r).action==="reduce"?"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 border-2 border-red-300 dark:border-red-600":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-2 border-gray-200 dark:border-gray-600"])}," ➖ Reduce Stock ",2)])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Quantity",-1)),g(t("input",{"onUpdate:modelValue":e[2]||(e[2]=d=>a(r).quantity=d),type:"number",min:"1",placeholder:"Enter quantity",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md focus:ring-primary-500 focus:border-primary-500"},null,512),[[c,a(r).quantity,void 0,{number:!0}]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Reason",-1)),g(t("select",{"onUpdate:modelValue":e[3]||(e[3]=d=>a(r).reason=d),class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md focus:ring-primary-500 focus:border-primary-500"},[...e[9]||(e[9]=[w('<option value="">Select reason</option><option value="PURCHASE">Purchase</option><option value="SALE">Sale</option><option value="RETURN">Return</option><option value="DAMAGE">Damage/Loss</option><option value="ADJUSTMENT">Inventory Adjustment</option>',6)])],512),[[v,a(r).reason]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Notes (Optional)",-1)),g(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=d=>a(r).notes=d),placeholder:"Add any additional notes...",rows:"2",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md focus:ring-primary-500 focus:border-primary-500"},null,512),[[c,a(r).notes]])]),t("div",D,[e[12]||(e[12]=t("p",{class:"text-sm text-gray-600 dark:text-blue-200"},"Stock After Update",-1)),t("p",{class:u(["text-2xl font-bold",a(r).action==="add"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},n(a(r).action==="add"?(o.product?.currentStock||0)+(a(r).quantity||0):(o.product?.currentStock||0)-(a(r).quantity||0)),3)]),o.error?(s(),l("div",L,n(o.error),1)):i("",!0)]),t("div",M,[t("button",{onClick:p,class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 font-medium"}," Cancel "),t("button",{onClick:k,disabled:o.isLoading||!a(r).quantity,class:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium flex items-center justify-center gap-2"},[o.isLoading?(s(),l("span",O,[...e[13]||(e[13]=[t("svg",{class:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):i("",!0),S(" "+n(o.isLoading?"Updating...":"Update Stock"),1)],8,R)])])])):i("",!0)}};export{j as _};
